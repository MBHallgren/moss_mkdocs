{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For technical documentation visit github.com/MBHallgren/MOSS . What is MOSS? MOSS is a fully automated analytical tool which provides phylogeny analyses about clinical isolates. It is designed to only use Oxford Nanopore long read data as input. What does MOSS produce? MOSS produces a pdf report about each isolates containing AMR genes, plasmids, virulence genes, mlst and much more. Additionally, if any closely related isolates are found in the database a phylogeny analysis will be carried out. All clinical data and metadata will be stored in an SQL database, thus allowing for multiuser surveillance of pathogens.","title":"Home"},{"location":"#welcome-to-mkdocs","text":"For technical documentation visit github.com/MBHallgren/MOSS .","title":"Welcome to MkDocs"},{"location":"#what-is-moss","text":"MOSS is a fully automated analytical tool which provides phylogeny analyses about clinical isolates. It is designed to only use Oxford Nanopore long read data as input.","title":"What is MOSS?"},{"location":"#what-does-moss-produce","text":"MOSS produces a pdf report about each isolates containing AMR genes, plasmids, virulence genes, mlst and much more. Additionally, if any closely related isolates are found in the database a phylogeny analysis will be carried out. All clinical data and metadata will be stored in an SQL database, thus allowing for multiuser surveillance of pathogens.","title":"What does MOSS produce?"},{"location":"about/","text":"About MOSS Built by M.B.Hallgren","title":"About"},{"location":"about/#about-moss","text":"Built by M.B.Hallgren","title":"About MOSS"},{"location":"citation/","text":"Citation Citation TBA","title":"Citation"},{"location":"citation/#citation","text":"Citation TBA","title":"Citation"},{"location":"installation/","text":"MOSS Installation Guide Operational System Microbial Outbreak Surveillance System (MOSS) was designed to run on a linux distribution. It was both developed and tested on various Ubuntu distributions, and it is therefore strongly recommended that users of MOSS use Ubuntu as their operational system. The recommended ubuntu version is 20.04, as this the latest stables version for MinKNOW. Anaconda The latest version of Anaconda is required, and the installation guide can be found here: Anaconda Linux Download . Docker Docker is required and can be installed from: Docker Ubuntu Installation . After following the installation instructions above, run the following command in the terminal to complete the and then restart the terminal: $ sudo groupadd docker $ sudo usermod -aG docker $USER $ sudo chmod 666 /var/run/docker.sock Nvidia CUDA toolkit Nvidia CUDA toolkit can be installed from: Nvidia CUDA toolkit . Installing the toolkit can be a bit of a challenge sometimes and requires the correct, updated and working drivers. If installed correctly, the \"nvidia-smi\" command in the terminal sound promt information about your GPU. Nvidia driver installation challenges can be quite different, so unfortunately no universal easy-fix can be provided. In this situation remember that google is your friend. The MOSS system was built and tested on a HP ZBOOK studio G8 Mobile WorkStation. The stable kernel which works with the nvidia-510 driver is 5.10.0-1044-oem. For help see: nvidia-smi ubuntu kernel HP ZBOOK . After a successful installation of the nvidia drivers entering the nvidia-smi command should give the following output: Oxford Nanopore Technologies software: MinKNOW For performing the sequencing with Oxford Nanopore sequencers MinKNOW must be installed. It may be downloaded from https://community.nanoporetech.com/downloads or alternatively from directly from the following commands: MinKNOW Ubuntu 20.04 (Working as of 17/3/2022): $ sudo apt-get update $ sudo apt-get install wget $ wget -O- https://mirror.oxfordnanoportal.com/apt/ont-repo.pub | sudo apt-key add - $ echo \"deb http://mirror.oxfordnanoportal.com/apt focal-stable non-free\" | sudo tee /etc/apt/sources.list.d/nanoporetech.sources.list $ sudo apt-get update $ sudo apt-get install minion-nc Guppy GPU for MinKNOW TBD Cloning from Github If git is not installed on the computer, it can be installed from: $ sudo apt install git When the dependencies above have been installed, MOSS can be cloned from Github . The cloning and subsequent installation of docker images and MOSS can be done with the following set of commands: $ git clone https://github.com/MBHallgren/moss.git $ cd moss $ python3 moss_install.py Checking installation Check that the installation has been successful by running: $ python3 /opt/moss/src/check_installation.py Running the moss GUI app After completing the previous installation steps correctly, it is now possible to run the GUI app by going to the bottom left menu and searching for \"moss\".","title":"Installation"},{"location":"installation/#moss-installation-guide","text":"","title":"MOSS Installation Guide"},{"location":"installation/#operational-system","text":"Microbial Outbreak Surveillance System (MOSS) was designed to run on a linux distribution. It was both developed and tested on various Ubuntu distributions, and it is therefore strongly recommended that users of MOSS use Ubuntu as their operational system. The recommended ubuntu version is 20.04, as this the latest stables version for MinKNOW.","title":"Operational System"},{"location":"installation/#anaconda","text":"The latest version of Anaconda is required, and the installation guide can be found here: Anaconda Linux Download .","title":"Anaconda"},{"location":"installation/#docker","text":"Docker is required and can be installed from: Docker Ubuntu Installation . After following the installation instructions above, run the following command in the terminal to complete the and then restart the terminal: $ sudo groupadd docker $ sudo usermod -aG docker $USER $ sudo chmod 666 /var/run/docker.sock","title":"Docker"},{"location":"installation/#nvidia-cuda-toolkit","text":"Nvidia CUDA toolkit can be installed from: Nvidia CUDA toolkit . Installing the toolkit can be a bit of a challenge sometimes and requires the correct, updated and working drivers. If installed correctly, the \"nvidia-smi\" command in the terminal sound promt information about your GPU. Nvidia driver installation challenges can be quite different, so unfortunately no universal easy-fix can be provided. In this situation remember that google is your friend. The MOSS system was built and tested on a HP ZBOOK studio G8 Mobile WorkStation. The stable kernel which works with the nvidia-510 driver is 5.10.0-1044-oem. For help see: nvidia-smi ubuntu kernel HP ZBOOK . After a successful installation of the nvidia drivers entering the nvidia-smi command should give the following output:","title":"Nvidia CUDA toolkit"},{"location":"installation/#oxford-nanopore-technologies-software-minknow","text":"For performing the sequencing with Oxford Nanopore sequencers MinKNOW must be installed. It may be downloaded from https://community.nanoporetech.com/downloads or alternatively from directly from the following commands: MinKNOW Ubuntu 20.04 (Working as of 17/3/2022): $ sudo apt-get update $ sudo apt-get install wget $ wget -O- https://mirror.oxfordnanoportal.com/apt/ont-repo.pub | sudo apt-key add - $ echo \"deb http://mirror.oxfordnanoportal.com/apt focal-stable non-free\" | sudo tee /etc/apt/sources.list.d/nanoporetech.sources.list $ sudo apt-get update $ sudo apt-get install minion-nc","title":"Oxford Nanopore Technologies software: MinKNOW"},{"location":"installation/#guppy-gpu-for-minknow","text":"TBD","title":"Guppy GPU for MinKNOW"},{"location":"installation/#cloning-from-github","text":"If git is not installed on the computer, it can be installed from: $ sudo apt install git When the dependencies above have been installed, MOSS can be cloned from Github . The cloning and subsequent installation of docker images and MOSS can be done with the following set of commands: $ git clone https://github.com/MBHallgren/moss.git $ cd moss $ python3 moss_install.py","title":"Cloning from Github"},{"location":"installation/#checking-installation","text":"Check that the installation has been successful by running: $ python3 /opt/moss/src/check_installation.py","title":"Checking installation"},{"location":"installation/#running-the-moss-gui-app","text":"After completing the previous installation steps correctly, it is now possible to run the GUI app by going to the bottom left menu and searching for \"moss\".","title":"Running the moss GUI app"},{"location":"setup/","text":"MOSS setup guide Database The moss database can be downloaded from: TBA LINK. The database consists of 4 KMA indexed files: The database should be a whole genome bacteria database indexed with KMA with the prefix .ATG. Initializing database system Launch the moss app and in the home page click on initialize database . Enter a name for the database system and select the folder containing the .ATG database you downloaded in the stop above. Submit the initialization and wait - this process might take 5-10 minutes. After the initialization is complete, you are now read to analyze isolate samples.","title":"Setup"},{"location":"setup/#moss-setup-guide","text":"","title":"MOSS setup guide"},{"location":"setup/#database","text":"The moss database can be downloaded from: TBA LINK. The database consists of 4 KMA indexed files: The database should be a whole genome bacteria database indexed with KMA with the prefix .ATG.","title":"Database"},{"location":"setup/#initializing-database-system","text":"Launch the moss app and in the home page click on initialize database . Enter a name for the database system and select the folder containing the .ATG database you downloaded in the stop above. Submit the initialization and wait - this process might take 5-10 minutes. After the initialization is complete, you are now read to analyze isolate samples.","title":"Initializing database system"},{"location":"usage/","text":"Usage Guide Nanopore sequencing Before using MOSS, Nanopore sequencing has to be carried out. MOSS 1.0.0 has been designed to work ONLY with ONT data. It is recommended that sequencing is conducted using ONT's MinKNOW software. Base calling It is recommended that base calling is conducted with either high-accuracy or super-high-accuracy models. Make sure that these are run using GPU base calling. FastQ During MinKNOW sequencing base calling can be performed automatically. This will produce fastQ files, which is prefered. Fast5 Alternatively, sequencing with MinKNOW can be performed without doing live base calling. After sequencing the MOSS base calling function can be used. The MOSS base calling section is found in the left-side menu of the app. MOSS Base calling Open the MOSS app and click on \"Base calling\" in the left-side menu. Upload the folder containing the many, smaller fast5 files which was generated doing sequencing. Provide a unique experiment name. The experiment name should NOT be a small, generic one. Bad experiment name: nanopore_run_1 Good experiment name: icu_patients_denmark_june_1_6_1996 Select the prefered base calling algorithm (HAC is recommended as default). Select flow-cell type, kit and barcodes. Finally, submit the base calling run. Entering meta data for sequencing run When FastQ files have been produced, either from automated base calling with MinKNOW or through the MOSS app, it is now time to submit meta data about the experiment. In the MOSS app go to home>metadata. Enter a unique experiment name and select all the FastQ files - There should ONLY be one FastQ file for isolate. The experiment name should NOT be a small, generic one. Bad experiment name: nanopore_run_1 Good experiment name: icu_patients_denmark_june_1_6_1996 An experiment name already used will not be accepted by the system. After entering experiment name and isolate files, hit the Generate meta data table button. Fill in the corresponding meta data for each isolate and generate the meta data sheet. The meta data sheet is the only item required to begin an analysis Running an analysis After successfully generating a meta data sheet for your sequencing experiment, go to Home > Analyse . Select the meta data sheet and submit the analyses. The progress and result of the analysis can be seen in the Results section in the left-side menu. Clicking on the little report icon to the right of the samples will open their PDF report. Generating the PDF is the last step of the pipeline and so a blank document will open if the analysis has not completed","title":"Usage"},{"location":"usage/#usage-guide","text":"","title":"Usage Guide"},{"location":"usage/#nanopore-sequencing","text":"Before using MOSS, Nanopore sequencing has to be carried out. MOSS 1.0.0 has been designed to work ONLY with ONT data. It is recommended that sequencing is conducted using ONT's MinKNOW software.","title":"Nanopore sequencing"},{"location":"usage/#base-calling","text":"It is recommended that base calling is conducted with either high-accuracy or super-high-accuracy models. Make sure that these are run using GPU base calling.","title":"Base calling"},{"location":"usage/#fastq","text":"During MinKNOW sequencing base calling can be performed automatically. This will produce fastQ files, which is prefered.","title":"FastQ"},{"location":"usage/#fast5","text":"Alternatively, sequencing with MinKNOW can be performed without doing live base calling. After sequencing the MOSS base calling function can be used. The MOSS base calling section is found in the left-side menu of the app.","title":"Fast5"},{"location":"usage/#moss-base-calling","text":"Open the MOSS app and click on \"Base calling\" in the left-side menu. Upload the folder containing the many, smaller fast5 files which was generated doing sequencing. Provide a unique experiment name. The experiment name should NOT be a small, generic one. Bad experiment name: nanopore_run_1 Good experiment name: icu_patients_denmark_june_1_6_1996 Select the prefered base calling algorithm (HAC is recommended as default). Select flow-cell type, kit and barcodes. Finally, submit the base calling run.","title":"MOSS Base calling"},{"location":"usage/#entering-meta-data-for-sequencing-run","text":"When FastQ files have been produced, either from automated base calling with MinKNOW or through the MOSS app, it is now time to submit meta data about the experiment. In the MOSS app go to home>metadata. Enter a unique experiment name and select all the FastQ files - There should ONLY be one FastQ file for isolate. The experiment name should NOT be a small, generic one. Bad experiment name: nanopore_run_1 Good experiment name: icu_patients_denmark_june_1_6_1996 An experiment name already used will not be accepted by the system. After entering experiment name and isolate files, hit the Generate meta data table button. Fill in the corresponding meta data for each isolate and generate the meta data sheet. The meta data sheet is the only item required to begin an analysis","title":"Entering meta data for sequencing run"},{"location":"usage/#running-an-analysis","text":"After successfully generating a meta data sheet for your sequencing experiment, go to Home > Analyse . Select the meta data sheet and submit the analyses. The progress and result of the analysis can be seen in the Results section in the left-side menu. Clicking on the little report icon to the right of the samples will open their PDF report. Generating the PDF is the last step of the pipeline and so a blank document will open if the analysis has not completed","title":"Running an analysis"}]}